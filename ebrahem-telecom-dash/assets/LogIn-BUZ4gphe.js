import{u as b,r as d,j as e,a as j,b as w,c as N,_ as f,d as v,C as y}from"./index-DM6_aNyI.js";const k=(n,o)=>{const t={};for(const a in o){const r=n[a],s=o[a];if(s.required&&!r){t[a]=`${s.label} is required`;continue}if(s.minLength&&r.length<s.minLength){t[a]=`${s.label} must be at least ${s.minLength} characters`;continue}if(s.maxLength&&r.length>s.maxLength){t[a]=`${s.label} must be less than ${s.maxLength} characters`;continue}s.pattern&&!s.pattern.test(r)&&(t[a]=`${s.label} is invalid`)}return t};function L({setSubmit:n}){const o=b(),[t,a]=d.useState(""),[r,s]=d.useState(""),[i,m]=d.useState({}),h=l=>{l.target.checked&&localStorage.setItem("name",t)},p=async l=>{var x;l.preventDefault();const u=k({name:t,password:r},{name:{required:!0,minLength:3,label:"Username"},password:{required:!0,minLength:8,label:"Password"}});if(Object.keys(u).length>0){m(u);return}m({}),n(!0);try{const c=await j.post(`${w}login`,null,{params:{username:t,password:r},headers:{Accept:"application/json"}}),g=c.data.data.token;N.set("token",g,{expires:90,secure:!0}),localStorage.setItem("user",JSON.stringify(c.data.data.user)),o("/",{state:{remember:!0}})}catch(c){f.error("فشل تسجيل الدخول"),((x=c.response)==null?void 0:x.status)===404&&f.error("User not found"),n(!1)}};return e.jsx("form",{onSubmit:p,className:"flex flex-col gap-4 w-full",children:e.jsxs("div",{className:"flex flex-col items-end w-full justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsx("label",{htmlFor:"name",className:"text-xs font-medium",children:"اسم المستخدم"}),e.jsx("input",{onChange:l=>a(l.target.value),type:"text",name:"name",id:"name",className:"rounded-xl border-black/10 border px-5 py-4 w-full outline-none focus:border-main-color transition-all duration-300"}),i.name&&e.jsx("div",{className:"text-red-600 text-sm",children:i.name})]}),e.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[e.jsx("label",{htmlFor:"password",className:"text-xs font-medium",children:"كلمة المرور"}),e.jsx("input",{onChange:l=>s(l.target.value),type:"password",name:"password",id:"password",className:"rounded-xl border-black/10 border px-5 py-4 w-full outline-none focus:border-main-color transition-all duration-300"}),i.password&&e.jsx("div",{className:"text-red-600 text-sm",children:i.password})]}),e.jsxs("div",{className:"flex items-center self-start gap-2",children:[e.jsx("input",{onChange:h,className:"hidden complete",type:"checkbox",id:"check-round"}),e.jsx("label",{className:"flex items-center h-10 px-1 cursor-pointer",htmlFor:"check-round",children:e.jsx("span",{className:"checkbox-inner flex items-center justify-center w-5 h-5 text-transparent border-2 border-gray-300"})}),e.jsx("label",{htmlFor:"check-round",className:"text-xs font-medium",children:"تذكرني"})]}),e.jsx("button",{type:"submit",className:"bg-main-color w-full h-[50px] text-white rounded-lg flex-center main-button",children:"تسجيل الدخول"})]})})}const S="/assets/logo-login-B1QLy7kY.svg";function C(){const[n,o]=d.useState(!1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex w-full h-screen items-center justify-center ",children:[e.jsxs("div",{className:"w-[72%] flex shadow-2xl shadow-[#000000] rounded-[21px] h-[614px]",children:[e.jsxs("div",{className:"text-right right w-1/2 h-full flex flex-col px-8 gap-14 justify-center",children:[e.jsx("p",{className:"text-2xl font-semibold",children:"تسجيل الدخول"}),e.jsx(L,{setSubmit:o})]}),e.jsx("div",{className:" rounded-l-[21px] flex justify-center items-center p-12 left w-1/2 h-full bg-gradient-to-br from-[#282561] to-[#1D7291]",children:e.jsx("img",{src:S})})]}),e.jsx("div",{className:v("w-full h-full flex items-center justify-center absolute top-0 left-0 bg-[#ffffff7e]",{hidden:n==!1}),children:e.jsx(y,{})})]})})}export{C as default};
